<%= form_with(model: profile, local: true) do |form| %>
  <% if profile.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(profile.errors.count, "error") %> prohibited this profile from being saved:</h2>

      <ul>
        <% profile.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="card text-white bg-success mt-proj">

    <div class="card-header">
      Edit Your Profile
      <%= link_to "Back", browse_path, class: "float-right" %>
    </div>
    <div class="card-body">
      <h5 class="card-title">[text]</h5>
      <p class="card-text">

        <div class="field">
          <%= form.hidden_field :account_id, value: current_account.id %>
        </div>

        <div class="field">
          <%= form.label :name %>
          <%= form.text_field :name %>
        </div>

        <div class="field">
          <%= form.label :profile_pic %>

          <% if profile.profile_pic.attached? %>
            <%= image_tag profile.profile_pic %>
          <% end %>

          <%= form.file_field :profile_pic %>
        </div>


        <div class="field">
          <%= form.label :skills %>
          
          <% replacements = {
              '[' => '', ']' => '',
              '/' => '', '"' => ''} %>
          <% if @profile.skills=="[\"\"]"
          selected_skills = []
          else
          selected_skills = @profile.skills.gsub(Regexp.union(replacements.keys), replacements)[2..-1].split(", ")
          end %>

          <%= form.select(:skills, [['Python', 'Python'],
                                    ['JavaScript', 'JavaScript'],
                                    ['C#', 'C#'],
                                    ['Ruby', 'Ruby'],
                                    ['HTML', 'HTML']
                                   ], {:selected => selected_skills, :include_blank => true },
                                     { :multiple => true }
                                   ) %>
        </div>

        <div class="actions">
          <%= form.submit %>
        </div>

    </p>
  </div>
</div>
<% end %>
